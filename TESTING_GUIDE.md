# ğŸ§ª Property Approval System - Testing Guide\n\n## Quick Test Steps\n\n### Test 1: Add Property and Verify It's Hidden âœ“\n\n**Steps:**\n1. Login as Property Owner\n2. Click \"Add Property\"\n3. Fill in all required fields\n4. Submit\n5. You should see: `\"Property listed successfully! It will be visible after verification.\"`\n6. Open homepage in new tab / incognito window\n7. Try to find the property\n\n**Expected Result:** Property should NOT appear on homepage âœ“\n\n---\n\n### Test 2: Search Does Not Return Pending Properties âœ“\n\n**Steps:**\n1. (After Test 1) Try to search for the property\n2. Use city name or property name\n\n**Expected Result:** Pending property should NOT appear in search results âœ“\n\n---\n\n### Test 3: Direct URL Access Blocked âœ“\n\n**Steps:**\n1. Copy the property URL from owner dashboard\n2. Open new incognito window (not logged in)\n3. Paste the URL\n\n**Expected Result:** \n- Either: Page not found or\n- Message: \"This property is not available for viewing right now.\" âœ“\n\n---\n\n### Test 4: Admin Can See Pending in Dashboard âœ“\n\n**Steps:**\n1. Login as Admin\n2. Go to Admin Dashboard\n3. Look at the statistics box\n\n**Expected Result:** \n- See: `\"Pending Properties: 1\"`\n- See the property in the properties list with status badge âœ“\n\n---\n\n### Test 5: Admin Approves Property âœ“\n\n**Steps:**\n1. In Admin Dashboard\n2. Find the pending property\n3. Click \"APPROVE\" button\n\n**Expected Result:** \n- Property status changes from `pending` â†’ `active`\n- Page updates (may show success message) âœ“\n\n---\n\n### Test 6: Property Now Visible to All Users âœ“\n\n**Steps:**\n1. Open homepage (logout first)\n2. Search for the property\n3. Click on the property\n\n**Expected Result:** \n- Property appears on homepage âœ“\n- Property appears in search results âœ“\n- Can view property details âœ“\n\n---\n\n### Test 7: Admin Can Deactivate Property âœ“\n\n**Steps:**\n1. In Admin Dashboard\n2. Find the approved (active) property\n3. Click \"DEACTIVATE\" button\n\n**Expected Result:** \n- Property status changes from `active` â†’ `inactive`\n- Property becomes hidden again âœ“\n\n---\n\n### Test 8: Owner Can See Own Pending Property âœ“\n\n**Steps:**\n1. Login as the property owner (who added the property)\n2. Go to Owner Dashboard\n3. Look for the property\n\n**Expected Result:** \n- Owner can see their own pending property âœ“\n- Status shows as \"Pending\" or \"Awaiting Approval\" âœ“\n\n---\n\n### Test 9: Other Users Cannot See Pending âœ“\n\n**Steps:**\n1. Login as different user (not owner, not admin)\n2. Try to search for pending property\n3. Try to access direct URL (if you have it)\n\n**Expected Result:** \n- Property does not appear in search âœ“\n- Direct URL access blocked âœ“\n\n---\n\n## Database Verification\n\n### Check Database After Adding Property:\n\n```javascript\n// Connect to MongoDB\ndb.hostels.findOne({name: \"Your Property Name\"})\n\n// Should show:\n{\n  _id: ObjectId(...),\n  name: \"Your Property Name\",\n  city: \"...\",\n  status: \"pending\",  // â† This is the key!\n  created_at: ISODate(...),\n  approved_at: null\n}\n```\n\n### Check Database After Approval:\n\n```javascript\ndb.hostels.findOne({name: \"Your Property Name\"})\n\n// Should show:\n{\n  _id: ObjectId(...),\n  name: \"Your Property Name\",\n  city: \"...\",\n  status: \"active\",   // â† Changed!\n  created_at: ISODate(...),\n  approved_at: ISODate(...)  // â† Now has timestamp!\n}\n```\n\n---\n\n## API Testing (Using Postman or curl)\n\n### Test: Get Active Properties Only\n\n```bash\ncurl http://localhost:5000/api/hostels\n```\n\n**Expected:** Only returns properties with `status: \"active\"`\n\n---\n\n### Test: Search Properties\n\n```bash\ncurl -X POST http://localhost:5000/api/hostels/search \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"pending_property_name\"}'\n```\n\n**Expected:** Pending property should NOT appear in results\n\n---\n\n### Test: Get Single Property\n\n```bash\ncurl http://localhost:5000/api/hostels/PROPERTY_ID\n```\n\n**If property is pending:**\n- Status: 404\n- Message: \"This property is not available right now\"\n\n**If property is active:**\n- Status: 200\n- Returns property data\n\n---\n\n### Test: Admin Approve\n\n```bash\ncurl -X POST http://localhost:5000/api/admin/properties/PROPERTY_ID/approve \\\n  -H \"Authorization: Bearer ADMIN_JWT_TOKEN\" \\\n  -H \"Content-Type: application/json\"\n```\n\n**Expected:** \n- Status: 200\n- Message: \"Property approved successfully\"\n- Database updates: `status: 'active'`\n\n---\n\n## Troubleshooting\n\n### Problem: Property Still Visible After Adding\n\n**Check:**\n1. Is the property showing in search?\n2. Check database: Is `status: 'pending'`?\n3. Check error logs for filtering issues\n\n**Solution:** Verify status filter is in place\n\n---\n\n### Problem: Admin Cannot See Pending Count\n\n**Check:**\n1. Are you logged in as admin?\n2. Does your user have `is_admin: true` in database?\n\n**Solution:** Create an admin user with `is_admin: true` field\n\n---\n\n### Problem: Admin Approve Button Not Working\n\n**Check:**\n1. Are you logged in?\n2. Is admin JWT token valid?\n3. Check browser console for JavaScript errors\n\n**Solution:** Check authentication and error logs\n\n---\n\n### Problem: Existing Properties Not Showing\n\n**Check:**\n1. Do existing properties have `status` field?\n2. What value is it set to?\n\n**Solution:** Run migration to add `status: \"active\"` to existing properties\n\n```javascript\ndb.hostels.updateMany(\n  { status: { $exists: false } },\n  { $set: { status: \"active\" } }\n)\n```\n\n---\n\n## Test Checklist\n\n- [ ] Add property â†’ Hidden âœ“\n- [ ] Homepage â†’ No pending âœ“\n- [ ] Search â†’ No pending âœ“\n- [ ] Direct URL â†’ Blocked âœ“\n- [ ] Admin dashboard â†’ Shows pending count âœ“\n- [ ] Admin dashboard â†’ Shows pending property âœ“\n- [ ] Admin approve â†’ Status changes âœ“\n- [ ] After approve â†’ Homepage shows it âœ“\n- [ ] After approve â†’ Search returns it âœ“\n- [ ] After approve â†’ Direct URL works âœ“\n- [ ] Admin deactivate â†’ Property hidden again âœ“\n- [ ] Owner â†’ Can see own pending âœ“\n- [ ] Other users â†’ Cannot see pending âœ“\n- [ ] API â†’ Only returns active âœ“\n- [ ] Database â†’ Status field present âœ“\n\n---\n\n## Success Criteria\n\nâœ… All tests pass  \nâœ… New properties hidden initially  \nâœ… Admin can approve  \nâœ… Approved properties visible  \nâœ… Users cannot access unapproved  \nâœ… Database tracking working  \nâœ… No errors in logs  \n\n---\n\n**Ready to test? Go through each test case and mark âœ“**\n