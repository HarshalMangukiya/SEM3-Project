{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">List a New Property</h4>
                </div>
                <div class="card-body">
                    <!-- Error/Success Messages -->
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            {% for category, message in messages %}
                                <div class="alert alert-{{ 'danger' if category == 'error' else 'warning' if category == 'warning' else 'info' if category == 'info' else 'success' }} alert-dismissible fade show" role="alert">
                                    {{ message }}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                    
                    <form action="/add" method="POST" enctype="multipart/form-data">
                        <!-- Basic Information -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-info-circle"></i> Basic Information</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Property Name</label>
                                    <input type="text" name="name" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Property Type</label>
                                    <select name="property_type" class="form-select">
                                        <option value="Hostel">Hostel</option>
                                        <option value="PG">PG</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label>City</label>
                                    <input type="text" name="city" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label>Location/Area</label>
                                    <input type="text" name="location" class="form-control" placeholder="e.g., Navarangpura" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label>Type</label>
                                    <select name="type" class="form-select">
                                        <option>Boys</option>
                                        <option>Girls</option>
                                        <option>Co-ed</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label>Full Address</label>
                            <textarea name="address" class="form-control" rows="2" placeholder="Complete address with street, building number, etc."></textarea>
                        </div>

                        <!-- Pricing -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-rupee-sign"></i> Pricing</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Starting Price (Monthly)</label>
                                    <input type="number" name="price" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Original Price (Monthly) - Optional</label>
                                    <input type="number" name="original_price" class="form-control" placeholder="Leave empty if no discount">
                                    <small class="form-text text-muted">Original price before discount (will show strikethrough)</small>
                                </div>
                            </div>
                        </div>

                        <!-- Room Types and Pricing -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-bed"></i> Room Types and Pricing</h5>
                        
                        <!-- Double Sharing -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3">Double Sharing</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label>Regular Room Price</label>
                                        <input type="number" name="double_sharing_regular_price" class="form-control" placeholder="Price per month">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" name="has_double_regular" id="has_double_regular" checked>
                                            <label class="form-check-label" for="has_double_regular">
                                                Available
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label>AC Room Price</label>
                                        <input type="number" name="double_sharing_ac_price" class="form-control" placeholder="Price per month">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" name="has_double_ac" id="has_double_ac">
                                            <label class="form-check-label" for="has_double_ac">
                                                Available
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Triple Sharing -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3">Triple Sharing</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label>Regular Room Price</label>
                                        <input type="number" name="triple_sharing_regular_price" class="form-control" placeholder="Price per month">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" name="has_triple_regular" id="has_triple_regular" checked>
                                            <label class="form-check-label" for="has_triple_regular">
                                                Available
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label>AC Room Price</label>
                                        <input type="number" name="triple_sharing_ac_price" class="form-control" placeholder="Price per month">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" name="has_triple_ac" id="has_triple_ac">
                                            <label class="form-check-label" for="has_triple_ac">
                                                Available
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quadruple Sharing -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3">Quadruple Sharing</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label>Regular Room Price</label>
                                        <input type="number" name="quadruple_sharing_regular_price" class="form-control" placeholder="Price per month">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" name="has_quadruple_regular" id="has_quadruple_regular" checked>
                                            <label class="form-check-label" for="has_quadruple_regular">
                                                Available
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label>AC Room Price</label>
                                        <input type="number" name="quadruple_sharing_ac_price" class="form-control" placeholder="Price per month">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" name="has_quadruple_ac" id="has_quadruple_ac">
                                            <label class="form-check-label" for="has_quadruple_ac">
                                                Available
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Location Coordinates -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-map-marker-alt"></i> Location Coordinates</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Latitude</label>
                                    <input type="number" step="any" name="latitude" class="form-control" placeholder="e.g., 23.0225">
                                    <small class="form-text text-muted">Get from Google Maps</small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Longitude</label>
                                    <input type="number" step="any" name="longitude" class="form-control" placeholder="e.g., 72.5714">
                                    <small class="form-text text-muted">Get from Google Maps</small>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Information -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-phone"></i> Contact Information</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Contact Phone</label>
                                    <input type="tel" name="contact_phone" class="form-control" placeholder="+91 98765 43210">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Contact Email</label>
                                    <input type="email" name="contact_email" class="form-control" placeholder="contact@example.com">
                                </div>
                            </div>
                        </div>

                        <!-- Amenities -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-star"></i> Amenities</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="WiFi" id="wifi" checked>
                                    <label class="form-check-label" for="wifi">WiFi</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Fully Furnished" id="furnished" checked>
                                    <label class="form-check-label" for="furnished">Fully Furnished</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="AC" id="ac">
                                    <label class="form-check-label" for="ac">AC</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="TV" id="tv">
                                    <label class="form-check-label" for="tv">TV</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Laundry" id="laundry">
                                    <label class="form-check-label" for="laundry">Laundry</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Hot Water" id="hotwater">
                                    <label class="form-check-label" for="hotwater">Hot Water</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="House Keeping" id="housekeeping">
                                    <label class="form-check-label" for="housekeeping">House Keeping</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Mattress" id="mattress">
                                    <label class="form-check-label" for="mattress">Mattress</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Parking" id="parking">
                                    <label class="form-check-label" for="parking">Parking</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Security" id="security">
                                    <label class="form-check-label" for="security">Security</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Food" id="food">
                                    <label class="form-check-label" for="food">Food</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="amenities" value="Gym" id="gym">
                                    <label class="form-check-label" for="gym">Gym</label>
                                </div>
                            </div>
                        </div>

                        <!-- Appliances -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-plug"></i> Appliances</h5>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="TV" id="app_tv">
                                    <label class="form-check-label" for="app_tv">TV</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Geyser" id="geyser">
                                    <label class="form-check-label" for="geyser">Geyser</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Lamps" id="lamps">
                                    <label class="form-check-label" for="lamps">Lamps</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Fridge" id="fridge">
                                    <label class="form-check-label" for="fridge">Fridge</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="AC" id="app_ac">
                                    <label class="form-check-label" for="app_ac">AC</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Fans" id="fans">
                                    <label class="form-check-label" for="fans">Fans</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Iron" id="iron">
                                    <label class="form-check-label" for="iron">Iron</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Induction" id="induction">
                                    <label class="form-check-label" for="induction">Induction</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Washing Machine" id="washing">
                                    <label class="form-check-label" for="washing">Washing Machine</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Water Purifier" id="purifier">
                                    <label class="form-check-label" for="purifier">Water Purifier</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Microwave" id="microwave">
                                    <label class="form-check-label" for="microwave">Microwave</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="appliances" value="Router" id="router">
                                    <label class="form-check-label" for="router">Router</label>
                                </div>
                            </div>
                        </div>

                        <!-- Multiple Photos Upload -->
                        <h5 class="mb-3 mt-4"><i class="fas fa-images"></i> Property Photos</h5>
                        <div class="mb-3">
                            <label>Upload Multiple Photos</label>
                            <input type="file" name="photos" class="form-control" accept="image/*" multiple>
                            <small class="form-text text-muted">Select multiple images (JPG, PNG, etc.) to showcase your property. First image will be the main photo.</small>
                        </div>
                        <div class="mb-3">
                            <label>Or Main Image URL</label>
                            <input type="text" name="image" class="form-control" placeholder="Or paste a main image URL here">
                            <small class="form-text text-muted">If you don't upload files, you can provide an image URL instead</small>
                        </div>
                        <div class="mb-3">
                            <label>Description</label>
                            <textarea name="desc" class="form-control" rows="4" placeholder="Describe your property, facilities, rules, etc."></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg w-100">
                            <i class="fas fa-plus-circle"></i> Add Property
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}