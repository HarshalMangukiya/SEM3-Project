<!DOCTYPE html>
<html>
<head>
    <title>Test Booking Fix</title>
</head>
<body>
    <h1>Test: Request to Book Button Fix</h1>
    
    <p>This page simulates the booking button behavior to test the fix.</p>
    
    <button onclick="testRequestBooking()" style="background: #2196F3; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;">
        Request to Book (Test)
    </button>
    
    <div id="result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc; min-height: 50px;">
        Test results will appear here...
    </div>

    <script>
        // Simulate the login status (not logged in)
        var isLoggedIn = false;
        
        function testRequestBooking() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<strong>Testing requestBooking function...</strong><br>';
            
            if (isLoggedIn) {
                resultDiv.innerHTML += '✓ User is logged in - would proceed with booking<br>';
            } else {
                resultDiv.innerHTML += '⚠ User is not logged in - showing confirmation dialog<br>';
                
                // Simulate the confirm dialog behavior
                const userChoice = confirm('You need to login to request a booking. Would you like to login now?');
                
                if (userChoice) {
                    resultDiv.innerHTML += '✓ User clicked OK - would redirect to login page<br>';
                    resultDiv.innerHTML += '→ Redirect URL: /login?redirect=/hostel/test123<br>';
                } else {
                    resultDiv.innerHTML += '✓ User clicked Cancel - staying on current page<br>';
                    resultDiv.innerHTML += '→ No redirect performed<br>';
                }
            }
            
            resultDiv.innerHTML += '<br><strong>Test completed successfully!</strong><br>';
            resultDiv.innerHTML += 'The fix ensures that users only get redirected when they click OK.';
        }
    </script>
</body>
</html>
